# 드롭 테이블 예시

## 빠른 내비게이션

### 언제 이 문서를 여는가

- 아이템 드롭 체감이 너무 짜거나 후반에 너무 퍼질 때
- 희귀도 티어 확률/가중치 체계를 새로 설계하거나 비교할 때
- 조건부 드롭, 복수 드롭, 수집 완료 기대 횟수를 계산해야 할 때

### Quick Formula

```
P(i) = w_i / Σw
레벨 보정 = clamp(1 - (플레이어레벨-몬스터레벨)*0.1, 0.1, 1.0)
최종 확률 = min(기본 확률 × (1 + 행운 × 0.01), 확률 상한)
수집 기대시도 = N × H_N
```

### 목차

- 1. 기본 가중치 테이블
- 2. 희귀도 티어 설계
- 3. 조건부 드롭
- 4. 복수 드롭 테이블
- 5. 가챠/뽑기 테이블
- 6. 수집 완료 기대값
- 설계 체크리스트

## 1. 기본 가중치 테이블

### 일반 몬스터 드롭

| 아이템 | 가중치 | 확률 |
|--------|--------|------|
| 골드 (소) | 60 | 60% |
| 골드 (중) | 25 | 25% |
| 회복 아이템 | 10 | 10% |
| 장비 | 4 | 4% |
| 희귀 장비 | 1 | 1% |
| **합계** | 100 | 100% |

### 보스 몬스터 드롭

| 아이템 | 가중치 | 확률 |
|--------|--------|------|
| 보스 전용 장비 | 30 | 30% |
| 희귀 재료 | 40 | 40% |
| 일반 재료 | 20 | 20% |
| 특수 아이템 | 10 | 10% |

---

## 2. 희귀도 티어 설계

### 로그 스케일 (10배씩)

| 등급 | 가중치 | 확률 |
|------|--------|------|
| 일반 (Common) | 1000 | 90.01% |
| 고급 (Uncommon) | 100 | 9.00% |
| 희귀 (Rare) | 10 | 0.90% |
| 에픽 (Epic) | 1 | 0.09% |

### 부드러운 스케일 (3~5배씩)

| 등급 | 가중치 | 확률 |
|------|--------|------|
| 일반 | 100 | 62.5% |
| 고급 | 40 | 25.0% |
| 희귀 | 15 | 9.4% |
| 에픽 | 5 | 3.1% |

---

## 3. 조건부 드롭

### 레벨 차이 보정

```
기본 드롭률 × 레벨 보정
레벨 보정 = 1 - (플레이어레벨 - 몬스터레벨) × 0.1
최소 0.1, 최대 1.0
```

| 레벨 차이 | 보정 | 설명 |
|-----------|------|------|
| 0 이하 | 100% | 동렙 이상 |
| +3 | 70% | 약간 높음 |
| +5 | 50% | 많이 높음 |
| +9 이상 | 10% | 너무 높음 (파밍 방지) |

### 행운 스탯 적용

```
최종 확률 = min(기본 확률 × (1 + 행운 × 0.01), 확률 상한)
```

행운 100 = 드롭률 2배 (상한 도달 전)

---

## 4. 복수 드롭 테이블

### 독립 판정 (각각 굴림)

| 슬롯 | 확률 | 내용 |
|------|------|------|
| 슬롯 1 | 100% | 골드 (고정) |
| 슬롯 2 | 30% | 재료 |
| 슬롯 3 | 10% | 장비 |
| 슬롯 4 | 1% | 희귀 |

기대값: 1.41개 아이템/킬

### 개수 먼저 결정

```
드롭 개수 = 1 + floor(random() × 3)  // 1~3개
각 아이템은 가중치 테이블에서 선택
```

---

## 5. 가챠/뽑기 테이블

### 기본 배너

| 등급 | 확률 | 천장 |
|------|------|------|
| SSR | 1% | 100회 확정 |
| SR | 9% | - |
| R | 90% | - |

### 픽업 배너

| 등급 | 확률 | 비고 |
|------|------|------|
| 픽업 SSR | 0.5% | 50% of SSR |
| 비픽업 SSR | 0.5% | 50% of SSR |
| SR | 9% | - |
| R | 90% | - |

---

## 6. 수집 완료 기대값

### 쿠폰 수집가 문제

N개 아이템을 모두 모으려면 평균 몇 번?

```
E = N × (1 + 1/2 + 1/3 + ... + 1/N)
E = N × H_N  (조화급수)
```

| 아이템 수 | 평균 시도 |
|-----------|----------|
| 5개 | 11.4회 |
| 10개 | 29.3회 |
| 20개 | 72.0회 |
| 50개 | 224.9회 |

**교훈**: 마지막 몇 개가 가장 오래 걸림

---

## 설계 체크리스트

1. [ ] 희귀 아이템 확률이 플레이어 기대와 맞는가?
2. [ ] 레벨/진행도에 따른 드롭 보정이 있는가?
3. [ ] 중복 보호(천장) 시스템이 있는가?
4. [ ] 파밍 효율이 의도한 플레이타임과 맞는가?

---

## 다음으로 볼 문서

- `./pity-systems.md` (연속 실패/중복 체감 보정 설계)
- `./economy-faucet-sink.md` (드롭 공급량이 경제 수지에 미치는 영향)
- `./enhancement-expected-cost.md` (강화 재료 공급량과 소모량 동기화)
